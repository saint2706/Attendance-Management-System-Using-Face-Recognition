# Generated migration for populating direction field from out field\n\nfrom django.db import migrations\n\n\ndef populate_direction_from_out(apps, schema_editor):\n    \"\"\"Populate direction field based on the out field value.\"\"\"\n    Time = apps.get_model(\"users\", \"Time\")\n    \n    # Update records in batches for efficiency\n    # out=False -> direction='in'\n    Time.objects.filter(out=False).update(direction=\"in\")\n    \n    # out=True -> direction='out'\n    Time.objects.filter(out=True).update(direction=\"out\")\n\n\ndef reverse_populate_out_from_direction(apps, schema_editor):\n    \"\"\"Reverse migration: populate out field from direction field.\"\"\"\n    Time = apps.get_model(\"users\", \"Time\")\n    \n    # direction='in' -> out=False\n    Time.objects.filter(direction=\"in\").update(out=False)\n    \n    # direction='out' -> out=True\n    Time.objects.filter(direction=\"out\").update(out=True)\n\n\nclass Migration(migrations.Migration):\n    dependencies = [\n        (\"users\", \"0015_add_direction_to_time\"),\n    ]\n\n    operations = [\n        migrations.RunPython(\n            populate_direction_from_out,\n            reverse_code=reverse_populate_out_from_direction,\n        ),\n    ]\n
